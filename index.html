<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen Toko - Sistem POS Offline</title>
    <meta name="description" content="Aplikasi manajemen toko offline untuk mengelola stok, penjualan, dan keuangan">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="32" height="32" rx="8" fill="#10b981"/>
                    <path d="M16 8L8 14V24H12V18H20V24H24V14L16 8Z" fill="white"/>
                </svg>
                <h1>TokoKu</h1>
            </div>
        </div>
        
        <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active" data-page="dashboard">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 4C3 3.44772 3.44772 3 4 3H7C7.55228 3 8 3.44772 8 4V7C8 7.55228 7.55228 8 7 8H4C3.44772 8 3 7.55228 3 7V4Z" fill="currentColor"/>
                    <path d="M3 13C3 12.4477 3.44772 12 4 12H7C7.55228 12 8 12.4477 8 13V16C8 16.5523 7.55228 17 7 17H4C3.44772 17 3 16.5523 3 16V13Z" fill="currentColor"/>
                    <path d="M13 3C12.4477 3 12 3.44772 12 4V7C12 7.55228 12.4477 8 13 8H16C16.5523 8 17 7.55228 17 7V4C17 3.44772 16.5523 3 16 3H13Z" fill="currentColor"/>
                    <path d="M12 13C12 12.4477 12.4477 12 13 12H16C16.5523 12 17 12.4477 17 13V16C17 16.5523 16.5523 17 16 17H13C12.4477 17 12 16.5523 12 16V13Z" fill="currentColor"/>
                </svg>
                <span>Dashboard</span>
            </a>
            
            <a href="#products" class="nav-item" data-page="products">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 3C3.44772 3 3 3.44772 3 4V6C3 6.55228 3.44772 7 4 7H16C16.5523 7 17 6.55228 17 6V4C17 3.44772 16.5523 3 16 3H4Z" fill="currentColor"/>
                    <path d="M4 9C3.44772 9 3 9.44772 3 10V16C3 16.5523 3.44772 17 4 17H16C16.5523 17 17 16.5523 17 16V10C17 9.44772 16.5523 9 16 9H4Z" fill="currentColor"/>
                </svg>
                <span>Produk</span>
            </a>
            
            <a href="#pos" class="nav-item" data-page="pos">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 3C2.44772 3 2 3.44772 2 4V7C2 7.55228 2.44772 8 3 8H17C17.5523 8 18 7.55228 18 7V4C18 3.44772 17.5523 3 17 3H3Z" fill="currentColor"/>
                    <path d="M4 10C3.44772 10 3 10.4477 3 11V16C3 16.5523 3.44772 17 4 17H7C7.55228 17 8 16.5523 8 16V11C8 10.4477 7.55228 10 7 10H4Z" fill="currentColor"/>
                    <path d="M10 11C10 10.4477 10.4477 10 11 10H16C16.5523 10 17 10.4477 17 11V16C17 16.5523 16.5523 17 16 17H11C10.4477 17 10 16.5523 10 16V11Z" fill="currentColor"/>
                </svg>
                <span>Kasir</span>
            </a>
            
            <a href="#transactions" class="nav-item" data-page="transactions">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 4C3 3.44772 3.44772 3 4 3H16C16.5523 3 17 3.44772 17 4V5C17 5.55228 16.5523 6 16 6H4C3.44772 6 3 5.55228 3 5V4Z" fill="currentColor"/>
                    <path d="M3 8C3 7.44772 3.44772 7 4 7H16C16.5523 7 17 7.44772 17 8V9C17 9.55228 16.5523 10 16 10H4C3.44772 10 3 9.55228 3 9V8Z" fill="currentColor"/>
                    <path d="M4 11C3.44772 11 3 11.4477 3 12V13C3 13.5523 3.44772 14 4 14H16C16.5523 14 17 13.5523 17 13V12C17 11.4477 16.5523 11 16 11H4Z" fill="currentColor"/>
                    <path d="M3 16C3 15.4477 3.44772 15 4 15H10C10.5523 15 11 15.4477 11 16V17C11 17.5523 10.5523 18 10 18H4C3.44772 18 3 17.5523 3 17V16Z" fill="currentColor"/>
                </svg>
                <span>Transaksi</span>
            </a>
            
            <a href="#reports" class="nav-item" data-page="reports">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 11C2 10.4477 2.44772 10 3 10H5C5.55228 10 6 10.4477 6 11V16C6 16.5523 5.55228 17 5 17H3C2.44772 17 2 16.5523 2 16V11Z" fill="currentColor"/>
                    <path d="M8 7C8 6.44772 8.44772 6 9 6H11C11.5523 6 12 6.44772 12 7V16C12 16.5523 11.5523 17 11 17H9C8.44772 17 8 16.5523 8 16V7Z" fill="currentColor"/>
                    <path d="M15 3C14.4477 3 14 3.44772 14 4V16C14 16.5523 14.4477 17 15 17H17C17.5523 17 18 16.5523 18 16V4C18 3.44772 17.5523 3 17 3H15Z" fill="currentColor"/>
                </svg>
                <span>Laporan</span>
            </a>
        </nav>
        
        <div class="sidebar-footer">
            <div class="offline-indicator">
                <div class="status-dot"></div>
                <span>Mode Offline</span>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Page -->
        <section id="dashboard-page" class="page active">
            <header class="page-header">
                <h2>Dashboard</h2>
                <p class="page-subtitle">Ringkasan penjualan dan stok toko</p>
            </header>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon green">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <p class="stat-label">Penjualan Hari Ini</p>
                        <h3 class="stat-value" id="today-sales">Rp 0</h3>
                        <p class="stat-change positive" id="sales-change">+0%</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon blue">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                            <path d="M3 9H21" stroke="currentColor" stroke-width="2"/>
                            <path d="M9 3V21" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <p class="stat-label">Total Produk</p>
                        <h3 class="stat-value" id="total-products">0</h3>
                        <p class="stat-change" id="products-info">Item</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon purple">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 2L7 7H2L6 10L4 15L9 12L14 15L12 10L16 7H11L9 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <p class="stat-label">Transaksi Hari Ini</p>
                        <h3 class="stat-value" id="today-transactions">0</h3>
                        <p class="stat-change" id="transactions-info">Transaksi</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon orange">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2V22M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <p class="stat-label">Laba Bersih</p>
                        <h3 class="stat-value" id="net-profit">Rp 0</h3>
                        <p class="stat-change positive" id="profit-change">+0%</p>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <h3>Stok Rendah</h3>
                        <span class="badge badge-warning" id="low-stock-count">0</span>
                    </div>
                    <div class="card-body">
                        <div id="low-stock-list" class="list-container">
                            <div class="empty-state">
                                <p>Semua produk memiliki stok yang cukup</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Transaksi Terbaru</h3>
                    </div>
                    <div class="card-body">
                        <div id="recent-transactions" class="list-container">
                            <div class="empty-state">
                                <p>Belum ada transaksi hari ini</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Page -->
        <section id="products-page" class="page">
            <header class="page-header">
                <div>
                    <h2>Manajemen Produk</h2>
                    <p class="page-subtitle">Kelola produk dan stok toko</p>
                </div>
                <button class="btn btn-primary" id="add-product-btn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Tambah Produk
                </button>
            </header>
            
            <div class="card">
                <div class="card-header">
                    <div class="search-box">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <input type="text" id="search-products" placeholder="Cari produk...">
                    </div>
                    <select id="filter-category" class="select-input">
                        <option value="">Semua Kategori</option>
                        <option value="makanan">Makanan</option>
                        <option value="minuman">Minuman</option>
                        <option value="snack">Snack</option>
                        <option value="lainnya">Lainnya</option>
                    </select>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table id="products-table">
                            <thead>
                                <tr>
                                    <th>Nama Produk</th>
                                    <th>Kategori</th>
                                    <th>Harga</th>
                                    <th>Stok</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="products-tbody">
                                <tr class="empty-row">
                                    <td colspan="5">
                                        <div class="empty-state">
                                            <p>Belum ada produk. Klik "Tambah Produk" untuk memulai.</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- POS Page -->
        <section id="pos-page" class="page">
            <header class="page-header">
                <h2>Kasir (Point of Sale)</h2>
                <p class="page-subtitle">Proses transaksi penjualan</p>
            </header>
            
            <div class="pos-grid">
                <div class="card">
                    <div class="card-header">
                        <h3>Pilih Produk</h3>
                    </div>
                    <div class="card-body">
                        <div class="search-box">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="currentColor" stroke-width="2"/>
                                <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <input type="text" id="search-pos-products" placeholder="Cari produk untuk ditambahkan...">
                        </div>
                        <div id="pos-products-list" class="products-grid">
                            <!-- Products will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <div class="card pos-cart">
                    <div class="card-header">
                        <h3>Keranjang</h3>
                        <button class="btn btn-text" id="clear-cart-btn">Kosongkan</button>
                    </div>
                    <div class="card-body">
                        <div id="cart-items" class="cart-items-list">
                            <div class="empty-state">
                                <p>Keranjang kosong</p>
                            </div>
                        </div>
                    </div>
                    <div class="cart-footer">
                        <div class="cart-total">
                            <span>Total:</span>
                            <h3 id="cart-total-amount">Rp 0</h3>
                        </div>
                        <div class="payment-method">
                            <label>Metode Pembayaran:</label>
                            <select id="payment-method" class="select-input">
                                <option value="tunai">Tunai</option>
                                <option value="transfer">Transfer</option>
                                <option value="qris">QRIS</option>
                            </select>
                        </div>
                        <button class="btn btn-primary btn-block" id="process-transaction-btn" disabled>
                            Proses Transaksi
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Transactions Page -->
        <section id="transactions-page" class="page">
            <header class="page-header">
                <div>
                    <h2>Riwayat Transaksi</h2>
                    <p class="page-subtitle">Daftar semua transaksi penjualan</p>
                </div>
                <button class="btn btn-secondary" id="export-transactions-btn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 17V19H17V17M10 2V14M10 14L6 10M10 14L14 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Export CSV
                </button>
            </header>
            
            <div class="card">
                <div class="card-header">
                    <div class="filter-group">
                        <label>Dari:</label>
                        <input type="date" id="filter-date-from" class="input">
                    </div>
                    <div class="filter-group">
                        <label>Sampai:</label>
                        <input type="date" id="filter-date-to" class="input">
                    </div>
                    <button class="btn btn-secondary" id="filter-transactions-btn">Filter</button>
                    <button class="btn btn-text" id="reset-filter-btn">Reset</button>
                </div>
                <div class="card-body">
                    <div class="table-container">
                        <table id="transactions-table">
                            <thead>
                                <tr>
                                    <th>ID Transaksi</th>
                                    <th>Tanggal</th>
                                    <th>Total</th>
                                    <th>Metode</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-tbody">
                                <tr class="empty-row">
                                    <td colspan="5">
                                        <div class="empty-state">
                                            <p>Belum ada transaksi</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reports Page -->
        <section id="reports-page" class="page">
            <header class="page-header">
                <h2>Laporan Keuangan</h2>
                <p class="page-subtitle">Analisis pendapatan dan pengeluaran</p>
            </header>
            
            <div class="card">
                <div class="card-header">
                    <select id="report-period" class="select-input">
                        <option value="today">Hari Ini</option>
                        <option value="week">Minggu Ini</option>
                        <option value="month">Bulan Ini</option>
                        <option value="custom">Custom</option>
                    </select>
                    <div id="custom-date-range" class="filter-group" style="display: none;">
                        <input type="date" id="report-date-from" class="input">
                        <span>-</span>
                        <input type="date" id="report-date-to" class="input">
                    </div>
                </div>
                <div class="card-body">
                    <div class="report-summary">
                        <div class="report-item">
                            <p class="report-label">Total Pendapatan</p>
                            <h3 class="report-value positive" id="total-revenue">Rp 0</h3>
                        </div>
                        <div class="report-item">
                            <p class="report-label">Total Pengeluaran</p>
                            <h3 class="report-value negative" id="total-expenses">Rp 0</h3>
                        </div>
                        <div class="report-item">
                            <p class="report-label">Laba/Rugi</p>
                            <h3 class="report-value" id="profit-loss">Rp 0</h3>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="revenue-chart"></canvas>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal for Product Form -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="product-modal-title">Tambah Produk</h3>
                <button class="modal-close" id="close-product-modal">&times;</button>
            </div>
            <form id="product-form">
                <div class="form-group">
                    <label for="product-name">Nama Produk *</label>
                    <input type="text" id="product-name" class="input" required>
                </div>
                <div class="form-group">
                    <label for="product-category">Kategori *</label>
                    <select id="product-category" class="select-input" required>
                        <option value="">Pilih Kategori</option>
                        <option value="makanan">Makanan</option>
                        <option value="minuman">Minuman</option>
                        <option value="snack">Snack</option>
                        <option value="lainnya">Lainnya</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="product-price">Harga (Rp) *</label>
                        <input type="number" id="product-price" class="input" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="product-stock">Stok *</label>
                        <input type="number" id="product-stock" class="input" min="0" required>
                    </div>
                </div>
                <input type="hidden" id="product-id">
                <div class="modal-footer">
                    <button type="button" class="btn btn-text" id="cancel-product-btn">Batal</button>
                    <button type="submit" class="btn btn-primary">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Transaction Detail -->
    <div id="transaction-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detail Transaksi</h3>
                <button class="modal-close" id="close-transaction-modal">&times;</button>
            </div>
            <div id="transaction-detail" class="transaction-detail">
                <!-- Transaction details will be loaded here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-text" id="close-detail-btn">Tutup</button>
                <button type="button" class="btn btn-secondary" id="print-receipt-btn">Cetak Struk</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/database.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/products.js"></script>
    <script src="js/pos.js"></script>
    <script src="js/transactions.js"></script>
    <script src="js/reports.js"></script>
    <script src="app.js"></script>
</body>
</html>
